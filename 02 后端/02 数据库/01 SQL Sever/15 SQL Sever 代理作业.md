# SQL Sever代理

> 如果数据库显示 **已禁用带代理 XP** ，则需要执行以下代码进行开启。

````sql
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'Agent XPs', 1;
GO
RECONFIGURE;
GO
````

## 1. 作业

### 1.1 作业概念

> SQL Sever 代理作业，相当于是数据库层面的一个定时任务。
>
> 通过设定代理作业，可以让数据库定时执行SQL语句。
>
> 例如：定时执行一段备份SQL语句备份数据库，或者执行某个存储过程去别的系统同步数据。

### 1.2 创建定时作业

* 利用 SSMS 在【SQL Sever 代理】中新建【作业】。

* 设定 作业名称、所有者(默认)、以及 备注说明。

* 新建【作业步骤】

    > 当我们有多个定时任务时，如果这些任务之间是有相关性的，那么可将它们分多个步骤设定在一个作业中。
    >
    > 如果这些任务之间没有相关性，那么我们可以将他们分成多个作业进行设定。

* 设定【作业执行计划】

    > 即设定执行时间和执行频率等设置。

* 设置【警报】

    > 根据情况决定是否设定

* 设置【通知】

    > 根据情况决定是否设定